[首页](https://github.com/ofdm/dadunzi)

### OSI七层及功能
1. 物理层（比特流）：实现在物理媒介上原始比特流的透明传输
2. 数据链路层（帧）：组帧，通过差错控制提供数据帧在信道上无差错的传输
3. 网络层（数据包）：对子网间的数据包进行路由选择和交换结点，确保数据及时传送
4. 传输层（数据段）：数据分段并提供端到端的、可靠的或不可靠的传输
5. 会话层：建立会话，如session认证、断点续传
6. 表示层：图像、视频编码解，数据加密
7. 应用层：为操作系统或网络应用程序提供访问网络服务的接口

### 简述TCP（传输控制协议）/UDP（用户数据报协议）的区别
TCP和UDP都是传输层中的协议，TCP提供可靠的通信传输，应用层可以忽略这些细节；而UDP只把数据报的分组从一台主机传输到另一台，并不保证数据能到达另外一端，它的可靠性由应用层提供。
区别大致如下：
1. TCP面向连接；UDP面向非连接，即发送数据前不需要建立链接
2. TCP提供可靠的服务（数据传输）；UDP无法保证
3. TCP面向字节流，UDP面向报文
4. TCP数据传输慢，UDP数据传输快
5. TCP的逻辑通信信道是全双工的可靠信道，UDP则是不可靠信道

### 简单说一下常见端口及对应的服务
端口                  服务
21                   FTP（文本传输协议）
22                   SSH
23                   Telnet（远程登录）
25                   SMTP（简单邮件传输协议）
53                   DNS域名服务器
80                   HTTP（超文本传输协议）
443                  HTTPS
1080                 Sockets

### 三次握手
1、客户端向服务器端发起连接请求，将序列号seq（Sequence number）=j，建立连接标志位SYN=1的包发送到服务器，客户端进入SYN_SEND状态
2、服务器收到包后确认SYN=1，向客户端发送标志确认号ACK=1，确认序号ack（Acknowledgment number）=j+1，seq=k的包，服务器进入SYN_RECV状态
3、客户端收到服务器包后检查确认序号ack是否为j+1，确认号ACK是否为1，是的话则向服务器发送确认序号ack=k+1，确认号ACK=1的数据包，双方进入ESTABLISHED状态，完成三次握手

#### 是否可以只进行两次握手或者进行四次握手
不可以，只进行两次握手的话，客户端无法确认连接是否建立，而服务器会对已建立的连接保存必要的资源，这就造成资源浪费
通信不可能百分之百可靠，三次握手已经使得双方做了通信的准备，再多增加握手次数也不会使得可靠性增加。

### 四次挥手
第一次：客户端停止发送数据并发出终止标志位FIN=1，序列号seq=u的包到服务器，请求连接释放。此时客户端进入FIN_WAIT_1
第二次：服务器收到连接释放的包，发出确认报文,服务器发送含确认标识位ACK=1、确认号ack=u+1和序列号seq=v的包到服务器。此时服务器进入CLOSE_WAIT状态，客户端收到服务器确认请求后，客户端进入FIN_WAIT_2状态，等待服务器发送连接释放的包。

（这时候客户端处于半关闭状态，即客户端已经没有数据要发送了，但是服务器若发送数据，客户端依然要接受。这个状态还要持续一段时间，也就是整个CLOSE_WAIT状态持续的时间。）

第三次：服务器将最后的数据发送完毕后，就向客户端发送FIN=1、ack=u+1、seq=w的包到客户端，服务器进入LAST_ACK状态，客户端收到服务器连接释放的包后进入TIME_WAIT状态
第四次：客户端发送含ACK=1、ack=w+1、seq=u+1的包服务器。客户端等待2MSL后进入CLOSED状态，服务器收到客户端确认后立即进入CLOSED状态。

（网络是不可靠的，有可能最后一个ACK丢失。所以TIME_WAIT状态就是用来重发可能丢失的ACK报文。在Client发送出最后的ACK回复，但该ACK可能丢失。Server如果没有收到ACK，将不断重复发送FIN片段。所以Client不能立即关闭，它必须确认Server接收到了该ACK。Client会在发送出ACK之后进入到TIME_WAIT状态。Client会设置一个计时器，等待2MSL的时间。如果在该时间内再次收到FIN，那么Client会重发ACK并再次等待2MSL。所谓的2MSL是两倍的MSL(Maximum Segment Lifetime)。MSL指一个片段在网络中最大的存活时间，2MSL就是一个发送和一个回复所需的最大时间。如果直到2MSL，Client都没有再次收到FIN，那么Client推断ACK已经被成功接收，则结束TCP连接。）

### IP地址分为哪几类
IPv4（32bit）:
类别    网络号        网络号     主机号
A类    以0开头         8位       24位
B类    以10开头        16位      16位
C类    以110开头       24位       8位
D类    前4位固定1110，多播地址
E类    前5位固定位11110，保留为今后所用

IPv6（128bit）

### 在浏览器中输入网址后执行会发生什么
1. 查找域名对应IP地址，这一步会依次查找浏览器缓存、系统缓存、路由器缓存、ISPNDS缓存，根域名服务器
2. 浏览器向IP对应的web服务器发送一个HTTP请求
3. 服务器响应请求，发回网页内容
4. 浏览器解析网页内容

### 解释ARP协议的工作过程
1. 每个主机都会在自己的ARP缓冲区建立一个ARP列表，以表示IP地址和MAC地址之间的对应关系
2. 当源主机要发送数据时，首先检查ARP列表中是否有对应IP地址的目的主机的MAC地址，如果有，就直接发送数据，如果没有，就向本网段的所有主机发送ARP数据包，该数据包包括的内容有：源主机IP地址，源主机MAC地址，目的主机IP地址
3. 当本网络的所有主机都收到该ARP数据包时，首先检查数据包中的IP地址是否时自己的IP地址，如果不是，则忽略该数据包，如果是，则首先从数据包中取出源主机的IP和MAC地址写入到ARP列表中，如果存在则覆盖，然后把自己的MAC地址写入ARP响应包中，告诉源主机自己是它想要找的MAC地址
4. 源主机收到ARP响应包后，将目的主机的IP和MAC地址写入ARP列表中，并利用此信息发送数据，如果源主机一直没有收到ARP响应数据包，表示ARP查询失败

### HTTP协议包括哪些请求
1. GET：对服务器资源的简单请求
2. POST：用于发送包含用户提交数据的请求
3. HEAD：类似于GET请求，不过返回的响应中没有具体内容，用于获取报头
4. PUT：传说中请求文档的一个版本
5. DELETE：发出一个删除指定文档的请求
6. TRACE：发送一个请求副本，以跟踪其处理进程
7. OPTIONS：返回所有可用的方法，检查服务器支持哪些方法
8. CONNECT：用于ssl隧道的基于代理的请求

### 简述HTTP中GET和POST的区别
从原理上看：
1. 根据HTTP规范，GET用于信息获取，而且应该是安全和幂等的
2. 根据HTTP规范，POST请求表示可能修改服务器上资源的请求
从表面上看：
1. GET请求的数据会附在URL后面，POST的数据放在HTTP包体
2. POST安全性比GET安全性高

### DNS域名解析过程
1. 浏览器向本地DNS发送查询请求
2. 本地DNS向根服务器查寻.com的地址
3. 本地DNS向.com服务器查询baidu.com的地址
4. 本地DNS向baidu.com服务器查询www.baidu.com的地址
5. 将www.baidu.com的地址发送给浏览器

### 解释超时重传
超时重传：发送端发送报文后若长时间未收到确认的报文则需要重发该报文。可能有以下几种情况：
1. 发送的数据没能到达接收端，所以对方没有响应。
2. 接收端接收到数据，但是ACK报文在返回过程中丢失。
3. 接收端拒绝或丢弃数据。

### 流量控制原理
目的是接收方通过TCP头窗口字段告知发送方本方可接收的最大数据量，用以解决发送速率过快导致接收方不能接收的问题。所以流量控制是点对点控制

### 拥塞控制原理
拥塞控制目的是防止数据被过多注网络中导致网络资源（路由器、交换机等）过载。
TCP拥塞控制算法：
1. 慢开始 & 拥塞避免：先试探网络拥塞程度再逐渐增大拥塞窗口。每次收到确认后拥塞窗口翻倍，直到达到阀值，这部分是慢开始过程。达到阀值后每次以一个MSS为单位增长拥塞窗口大小，当发生拥塞（超时未收到确认），将阀值减为原先一半，继续执行线性增加，这个过程为拥塞避免。
2. 快速重传 & 快速恢复

### 区分流量控制和拥塞控制
1. 流量控制属于通信双方协商；拥塞控制涉及通信链路全局。
2. 流量控制需要通信双方各维护一个发送窗、一个接收窗，对任意一方，接收窗大小由自身决定，发送窗大小由接收方响应的TCP报文段中窗口值确定；拥塞控制的拥塞窗口大小变化由试探性发送一定数据量数据探查网络状况后而自适应调整。